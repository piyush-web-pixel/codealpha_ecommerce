{% load static %} {% include 'header.html' %}

<section id="intro" class="position-relative mt-4">
  <div class="container-lg">
    <div class="swiper main-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div
            class="card d-flex flex-row align-items-end border-0 large jarallax-keep-img"
          >
            <img
              src="{% static 'images/card-image1.jpg' %}"
              alt="shoes"
              class="img-fluid jarallax-img"
            />
            <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
              <h2 class="card-title display-3 light">
                Stylish shoes for Women
              </h2>
              <a
                href="index.html"
                class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                >Shop Now</a
              >
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="row g-4">
            <div class="col-lg-12 mb-4">
              <div
                class="card d-flex flex-row align-items-end border-0 jarallax-keep-img"
              >
                <img
                  src="{% static 'images/card-image2.jpg' %}"
                  alt="shoes"
                  class="img-fluid jarallax-img"
                />
                <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
                  <h2 class="card-title style-2 display-4 light">
                    Sports Wear
                  </h2>
                  <a
                    href="index.html"
                    class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                    >Shop Now</a
                  >
                </div>
              </div>
            </div>
            <div class="col-lg-12">
              <div
                class="card d-flex flex-row align-items-end border-0 jarallax-keep-img"
              >
                <img
                  src="{% static 'images/card-image3.jpg' %}"
                  alt="shoes"
                  class="img-fluid jarallax-img"
                />
                <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
                  <h2 class="card-title style-2 display-4 light">
                    Fashion Shoes
                  </h2>
                  <a
                    href="index.html"
                    class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                    >Shop Now</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div
            class="card d-flex flex-row align-items-end border-0 large jarallax-keep-img"
          >
            <img
              src="{% static 'images/card-image1.jpg' %}"
              alt="shoes"
              class="img-fluid jarallax-img"
            />
            <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
              <h2 class="card-title display-3 light">Stylish shoes for men</h2>
              <a
                href="index.html"
                class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                >Shop Now</a
              >
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="row g-4">
            <div class="col-lg-12 mb-4">
              <div
                class="card d-flex flex-row align-items-end border-0 jarallax-keep-img"
              >
                <img
                  src="{% static 'images/card-image5.jpg' %}"
                  alt="shoes"
                  class="img-fluid jarallax-img"
                />
                <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
                  <h2 class="card-title style-2 display-4 light">Men Shoes</h2>
                  <a
                    href="index.html"
                    class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                    >Shop Now</a
                  >
                </div>
              </div>
            </div>
            <div class="col-lg-12">
              <div
                class="card d-flex flex-row align-items-end border-0 jarallax-keep-img"
              >
                <img
                  src="{% static 'images/card-image6.jpg' %}"
                  alt="shoes"
                  class="img-fluid jarallax-img"
                />
                <div class="cart-concern p-3 m-3 p-lg-5 m-lg-5">
                  <h2 class="card-title style-2 display-4 light">
                    Women Shoes
                  </h2>
                  <a
                    href="index.html"
                    class="text-uppercase light mt-3 d-inline-block text-hover fw-bold light-border"
                    >Shop Now</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<!-- 

  <section class="discount-coupon py-2 my-2 py-md-5 my-md-5">
    <div class="container">
      <div class="bg-gray coupon position-relative p-5">
        <div class="bold-text position-absolute">10% OFF</div>
        <div class="row justify-content-between align-items-center">
          <div class="col-lg-7 col-md-12 mb-3">
            <div class="coupon-header">
              <h2 class="display-7">10% OFF Discount Coupons</h2>
              <p class="m-0">Subscribe us to get 10% OFF on all the purchases</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-12">
            <div class="btn-wrap">
              <a href="#" class="btn btn-black btn-medium text-uppercase hvr-sweep-to-right">Email me</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>




  <section class="discount-coupon py-2 my-2 py-md-5 my-md-5">
    <div class="container">
      <div class="bg-gray coupon position-relative p-5">
        <div class="bold-text position-absolute">10% OFF</div>
        <div class="row justify-content-between align-items-center">
          <div class="col-lg-7 col-md-12 mb-3">
            <div class="coupon-header">
              <h2 class="display-7">10% OFF Discount Coupons</h2>
              <p class="m-0">Subscribe us to get 10% OFF on all the purchases</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-12">
            <div class="btn-wrap">
              <a href="#" class="btn btn-black btn-medium text-uppercase hvr-sweep-to-right">Email me</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
















<!-- feature product  -->
<section id="featured-products" class="product-store">
  <div class="container-md">
    <div class="product-content padding-small">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5">
        {% for p in product %}
        <div class="col mb-4">
          <div class="product-card position-relative">
            <div class="card-img">
              <img
                src="{{ p.image.url }}"
                alt="product-item"
                class="product-image img-fluid"
              />
              <div
                class="cart-concern position-absolute d-flex justify-content-center"
              >
                <div
                  class="cart-button d-flex gap-2 justify-content-center align-items-center"
                >
                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-toggle="modal"
                    data-bs-target="#modallong"
                    onclick="if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { addToCart('{{ p.id }}'); } else { alert('Please log in to add items to your cart.'); window.location.href='/login/?next=' + window.location.pathname; }"
                  >
                    <svg class="shopping-carriage">
                      <use xlink:href="#shopping-carriage"></use>
                    </svg>
                  </button>

                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-target="#modaltoggle"
                    data-bs-toggle="modal"
                  >
                    <svg class="quick-view">
                      <use xlink:href="#quick-view"></use>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <div
              class="card-detail d-flex justify-content-between align-items-center mt-3"
            >
              <h3 class="card-title fs-6 fw-normal m-0">
                <a href="/detail/{{p.slug}}/" style="text-decoration: none"
                  >{{p.pname}}</a
                >
              </h3>
              {% if p.is_discounted %}
              <p>
                <span style="text-decoration: line-through; color: gray"
                  >₹{{ p.prize }}</span
                >
                <span class="badge bg-success"
                  >{{ p.discount_percent }}% OFF</span
                >
                <br />
                <span class="text-danger fw-bold">₹{{ p.discount_price }}</span>
              </p>
              {% else %}
              <p class="fw-bold">₹{{ p.prize }}</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>


<!-- feature product  -->
<section id="featured-products" class="product-store">
  <div class="container-md">
    <div class="product-content padding-small">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5">
        {% for p in product %}
        <div class="col mb-4">
          <div class="product-card position-relative">
            <div class="card-img">
              <img
                src="{{ p.image.url }}"
                alt="product-item"
                class="product-image img-fluid"
              />
              <div
                class="cart-concern position-absolute d-flex justify-content-center"
              >
                <div
                  class="cart-button d-flex gap-2 justify-content-center align-items-center"
                >
                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-toggle="modal"
                    data-bs-target="#modallong"
                    onclick="if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { addToCart('{{ p.id }}'); } else { alert('Please log in to add items to your cart.'); window.location.href='/login/?next=' + window.location.pathname; }"
                  >
                    <svg class="shopping-carriage">
                      <use xlink:href="#shopping-carriage"></use>
                    </svg>
                  </button>

                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-target="#modaltoggle"
                    data-bs-toggle="modal"
                  >
                    <svg class="quick-view">
                      <use xlink:href="#quick-view"></use>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <div
              class="card-detail d-flex justify-content-between align-items-center mt-3"
            >
              <h3 class="card-title fs-6 fw-normal m-0">
                <a href="/detail/{{p.slug}}/" style="text-decoration: none"
                  >{{p.pname}}</a
                >
              </h3>
              {% if p.is_discounted %}
              <p>
                <span style="text-decoration: line-through; color: gray"
                  >₹{{ p.prize }}</span
                >
                <span class="badge bg-success"
                  >{{ p.discount_percent }}% OFF</span
                >
                <br />
                <span class="text-danger fw-bold">₹{{ p.discount_price }}</span>
              </p>
              {% else %}
              <p class="fw-bold">₹{{ p.prize }}</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- feature product  -->
<section id="featured-products" class="product-store">
  <div class="container-md">
    <div class="product-content padding-small">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5">
        {% for p in product %}
        <div class="col mb-4">
          <div class="product-card position-relative">
            <div class="card-img">
              <img
                src="{{ p.image.url }}"
                alt="product-item"
                class="product-image img-fluid"
              />
              <div
                class="cart-concern position-absolute d-flex justify-content-center"
              >
                <div
                  class="cart-button d-flex gap-2 justify-content-center align-items-center"
                >
                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-toggle="modal"
                    data-bs-target="#modallong"
                    onclick="addToCart('{{ p.id }}')"
                  >
                    <svg class="shopping-carriage">
                      <use xlink:href="#shopping-carriage"></use>
                    </svg>
                  </button>

                  <button
                    type="button"
                    class="btn btn-light"
                    data-bs-target="#modaltoggle"
                    data-bs-toggle="modal"
                  >
                    <svg class="quick-view">
                      <use xlink:href="#quick-view"></use>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
            <div
              class="card-detail d-flex justify-content-between align-items-center mt-3"
            >
              <h3 class="card-title fs-6 fw-normal m-0">
                <a href="/detail/{{p.slug}}/" style="text-decoration: none"
                  >{{p.pname}}</a
                >
              </h3>
              <span class="card-price fw-bold">{{ p.prize }}</span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<script>
  function addToCart(productId) {
    alert("first login and then shoping..");
  }
</script>

<script>
  var isLoggedIn = false; // or true, depending on login
</script>

<!-- 
<script>
function addToCart(productId) {
  fetch(`/add-to-cart/${productId}/`, {
    method: 'POST',
    headers: {
      'X-CSRFToken': '{{ csrf_token }}',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({})
  })
  .then(response => response.json())
  .then(data => {
    if(data.status === 'success') {
      alert(data.message);  // Show popup or custom toast here
    } else {
      alert("Something went wrong!");
    }
  });
}
</script>


<script>
function addToCart(productId) {
  fetch(`/add-to-cart/${productId}/`, {
    method: 'POST',
    headers: {
      'X-CSRFToken': '{{ csrf_token }}',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({})
  })
  .then(response => response.json())
  .then(data => {
    if (data.status === 'success') {
      alert(data.message);
      updateCartCount();  // Call this to update cart count live
    } else {
      alert("Failed to add to cart.");
    }
  });
}

function updateCartCount() {
  fetch('/cart-count/')
    .then(response => response.json())
    .then(data => {
      document.getElementById("cart-count").textContent = data.count;
    });
}
</script> -->

{% include 'footer.html' %}
